{% extends 'students/base.html' %}

{% block meta_title %}Список Груп{% endblock meta_title %}

{% block logo %} 

	     <!-- Logo -->
		 <div class="col-xs-8">
		   <h1> Сервіс Обліку Студентів </h1>
		  </div>
{% endblock logo %}

{% block group_selector %}
    <!-- Groups Selector -->
  <div class="col-xs-4" id="group-selector">
        <strong>Група:</strong>
        <select class="custom-select">
              <option value="" >Усі Групи </option>
              {% for group in GROUPS %}
        <option value="{{ group.id }}"{% if group.selected %} selected="1"{% endif %}> {{ group.title }}{% if group.leader %}, {{ group.leader }}{% endif %}</option>
        {% endfor %}
        
      </select>
      </div>    
{% endblock group_selector %}

{% block content %}

	   <!-- Додати групу -->
	   <div class="row">
	     <div class="col-xs-1">
		      <h2> Іспити </h2>
			</div>
		    <div class="col-xs-1 " id="group-add">
		      <!-- Додати групу -->  
		      <a class="btn btn-primary modal-form-link" href="{% url 'add_exam' %}" role="button">Додати Іспит</a>
		    </div>
	   </div>
	   
	   <div class="row" id="content-column">
	     <div class="col-xs-12" id="content-column">
		    						
		   <!-- Start Studenrs Listing -->
		   {% if exams %}
		   <table class="table table-hover table-striped">
		     <thead>
			 <tr>
			   <th> # </th>
			   <th> <a href="{% url 'exam' %}?order_by=subject{% if request.GET.order_by == 'subject' and request.GET.reverse != '1' %}&amp;reverse=1{% endif %}">
			   Назва предмету
			   {% if request.GET.order_by == 'subject' and request.GET.reverse != '1' %} &uarr;
			   {% elif request.GET.order_by == 'subject' and request.GET.reverse == '1' %} &darr;
			   {% endif %}</a></th>
			   <th> Дата та Час</th>
			   <th> <a href="{% url 'exam' %}?order_by=teacher{% if request.GET.order_by == 'teacher' and request.GET.reverse != '1' %}&amp;reverse=1{% endif %}"> Викладач
			   {% if request.GET.order_by == 'teacher' and request.GET.reverse != '1' %} &uarr;
			   {% elif request.GET.order_by == 'teacher' and request.GET.reverse == '1' %} &darr;
			   {% endif %}</a></th>
			   <th> Складають іспит</th>
			   <th> Дії </th>
			 </tr>
			 </thead>
		     <tbody>
		       
		       {% for exam in exams %}
			   <tr>
			     <td>{{ forloop.counter0 | add:exams.start_index }} </td>
			     <td><a class="modal-form-link" href="{% url 'exam_edit' exam.id %}"> {{ exam.subject }} </td>
			     <td> {{ exam.data_and_time}} </td>
			     <td><a class="modal-form-link" href="{% url 'exam_edit' exam.id %}"> {{ exam.teacher}} </td>
			     <td>
				   <div class = "btn-group">
   
                          <button type = "button" 
						               class = "btn btn-default dropdown-toggle" data-toggle = "dropdown"> Група
                            <span class = "caret"></span>
						  </button>
   
						  <ul class = "dropdown-menu" role = "menu">
						  	{% for group in exam.examenation.all %}
							<li role="presentation">
							  <a role="menuitem" tabindex="-1" href = "{% url 'exam' %}" {{ group.title }}>  {{ group.title }} </a>
							</li >
						  {% endfor %}
						  </ul>
						</div>
				 </td>
				 <td> 
					    <div class = "btn-group">
   
                          <button type = "button" 
						               class = "btn btn-default dropdown-toggle" data-toggle = "dropdown"> Дія
                            <span class = "caret"></span>
						  </button>
   
						  <ul class = "dropdown-menu" role = "menu">
							<li role="presentation">
							  <a role="menuitem" tabindex="-1" href = "{% url 'exam_edit' exam.id %}" class="modal-form-link">Редагувати</a>
							</li >
							<li role="presentation">
							  <a role="menuitem" tabindex="-1" href = "{% url 'exam_delete' exam.id %}"> Видалити</a>
							</li>
      
						  </ul>
						</div>
					  </td>
			   </tr> 
	           {% endfor %}
	           
			 </tbody>
		   </table>
		   {% else %}
		   <p> Поки немає іспитів у базі даних. </p>
		   {% endif %}
		   <!-- Start Studenrs Listing -->
{% endblock content %}

{% block pagination%}
	{% if exams.has_other_pages %}
	{% with order_by=request.GET.order_by reverse=request.GET.reverse %}
	<nav>
	    <ul class = "pagination">
		    <li><a href = "{% url 'exam' %}?page=1&amp;order_by={{order_by}}&amp;reverse={{reverse}}">&laquo;</a></li>
		    {% for p in exams.paginator.page_range %}
			<li {% if exams.number == p %} class = "active"{% endif %}> 
				<a href = "{% url 'exam' %}?page={{p}}&amp;order_by={{order_by}}&amp;reverse={{reverse}}">{{p}}</a></li>
			{% endfor %}
			<li><a href = "{% url 'exam'%}?page={{ exam.paginator.num_pages }}&amp;order_by={{order_by}}&amp;reverse={{reverse}}">
			&raquo;</a>
			</li>
		</ul>
	</nav>
	{% endwith %}
	{% endif %}
{% endblock pagination%}

{% block footer %}

		<!-- Start Footer -->
		<div class="row" id="footer">
		  <div class="col-xs-12">
		   &copy; 2020 Сервіс Обліку Студентів
		  </div>
		</div>
		<!-- End Footer -->
		
{% endblock footer %}
		  